version: '3'
services:
  game_module:
    image: game-sbt
    stdin_open: true
    ports:
      - 9001:9001
    networks:
      default:
        aliases:
          - mygame

  player_module:
    image: player-sbt
    ports:
      - 9000:9000
    networks:
      default:
        aliases:
          - myplayer
  database:
    image: "postgres"
    container_name: "database"
    networks:
      default:
        aliases:
          - database
    ports:
      - "5432:5432"
    environment:
      - POSTGRES_USER=root
      - POSTGRES_PASSWORD=123
      - POSTGRES_MULTIPLE_DATABASES=player,game
    volumes:
      - ./scripts/create-multiple-databases.sh:/docker-entrypoint-initdb.d/initdb.sh
      - db-data:/var/lib/postgresql/data
  mongodb:
    image: "mongo:latest"
    container_name: "mongodb"
    networks:
      default:
        aliases:
          - mongodb
    ports:
      - "27017:27017"
    environment:
      - MONGO_INITDB_DATABASE=muehle
      - MONGO_INITDB_ROOT_USERNAME=root
      - MONGO_INITDB_ROOT_PASSWORD=123
    volumes:
      - mongodb:/data/db
      - ./scripts/mongo-init.js:/docker-entrypoint-initdb.d/mongo-init.js:ro
  volumes:
    db-data:
    mongodb:
